"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react");function e(){return(e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function i(e,i){var r=t.useState((function(){try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||i}catch(t){return i}})),n=r[0],a=r[1];return[n,function(t){try{var i=t instanceof Function?t(n):t;a(i),window.localStorage.setItem(e,i)}catch(t){console.log(t)}}]}var r={items:[],isWishlistEmpty:!0,totalWishlistItems:0,wishlistTotal:0,metadata:{}},n=t.createContext(r),a=function(t){return void 0===t&&(t=12),[].concat(Array(t)).map((function(){return(~~(36*Math.random())).toString(36)})).join("")};function o(t,i){switch(i.type){case"SET_ITEMS":return s(t,i.payload);case"ADD_ITEM":var n=t.items;return n.push(i.payload),s(t,n);case"REMOVE_ITEM":var a=t.items.filter((function(t){return t.id!==i.id}));return s(t,a);case"EMPTY_WISHLIST":return r;case"CLEAR_WISHLIST_META":return e({},t,{metadata:{}});case"SET_WISHLIST_META":return e({},t,{metadata:e({},i.payload)});case"UPDATE_WISHLIST_META":return e({},t,{metadata:e({},t.metadata,i.payload)});default:throw new Error("No action specified")}}var s=function(t,i){void 0===t&&(t=r);var n=i.length,a=0===n;return e({},r,t,{items:u(i),totalWishlistItems:n,wishlistTotal:c(i),isWishlistEmpty:a})},u=function(t){return t.map((function(t){return e({},t,{itemTotal:t.price})}))},c=function(t){return t.reduce((function(t,e){return t+e.price}),0)};exports.WishlistProvider=function(s){var u=s.children,c=s.id,d=s.defaultItems,l=void 0===d?[]:d,f=s.onSetItems,p=s.onItemAdd,m=s.onItemRemove,h=s.storage,E=void 0===h?i:h,I=s.metadata,T=c||a(),y=E(c?"react-use-wishlist-"+T:"react-use-wishlist",JSON.stringify(e({id:T},r,{items:l,metadata:I}))),S=y[1],v=t.useReducer(o,JSON.parse(y[0])),w=v[0],W=v[1];return t.useEffect((function(){S(JSON.stringify(w))}),[w,S]),t.createElement(n.Provider,{value:e({},w,{getWishlistItem:function(t){return w.items.find((function(e){return e.id===t}))},inWishlist:function(t){return w.items.some((function(e){return e.id===t}))},setWishlistItems:function(t){W({type:"SET_ITEMS",payload:t.map((function(t){return t}))}),f&&f(t)},addWishlistItem:function(t){if(!t.id)throw new Error("You must provide an `id` for items");if(w.items.find((function(e){return e.id===t.id})))throw new Error("This item is already added to wishlist");if(!t.hasOwnProperty("price"))throw new Error("You must pass a `price` for new items");var e=t;W({type:"ADD_ITEM",payload:e}),p&&p(e)},removeWishlistItem:function(t){t&&(W({type:"REMOVE_ITEM",id:t}),m&&m(t))},emptyWishlist:function(){return W({type:"EMPTY_WISHLIST"})},clearWishlistMetadata:function(){W({type:"CLEAR_WISHLIST_META"})},setWishlistMetadata:function(t){t&&W({type:"SET_WISHLIST_META",payload:t})},updateWishlistMetadata:function(t){t&&W({type:"UPDATE_WISHLIST_META",payload:t})}})},u)},exports.createWishlistIdentifier=a,exports.initialState=r,exports.useWishlist=function(){var e=t.useContext(n);if(!e)throw new Error("Expected to be wrapped in a WishlistProvider");return e};
//# sourceMappingURL=react-use-wishlist.cjs.production.min.js.map
